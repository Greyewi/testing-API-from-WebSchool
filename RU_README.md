# testing-API-from-WebSchool
API для тестирования

# <a href="http://webschool.pspu.ru/WebSchool/web/main/contact/demo">DEMO</a>

# Описание
<p>
Данная система тестироваиния предназначена для создания своего теста, который можно поместить на сайт. Система тестирования имеет следующие особенности:
<ol>
<li>Ручное заполнение вопросов, через .json файл</li>
<li>Настраивается большинство параметров тестирования(количество вопросов, минимальное количество правильных ответов для похождения теста, количество минут на прохождение теста и описание)</li>
<li>Есть три типа вопросов: с отнытым вопросом, с выбором одного вопроса из списка(<=5) и с выбором одного или нескольких вопросов из списка(<=5)</li>
<li>После прохождения теста результаты отправляются в родительское окно и дальше мы можем с ними работать, как захотим</li>
<li>Тестирование зачищенно от просмотра ответов</li>
<li>Дизайн основан на открытом фреймворке materialize, естественно все можно настроить под свои нужды</li>
<li>Есть возможность выбрать определенное количество вопросов из банка вопросов</li>
<li>Выборка вопросов происходит со случайной прогрессирующей последовательностью. </li>
</ol>
</p>

# Инструкция
<ol>
<li> Скачиваем каталог и загружаем к себе на хостинг (Скачать можно c <a href="https://yadi.sk/d/Xdx6ej8yrg7nJ">yandex disk</a> и <a href="https://drive.google.com/file/d/0B-yI0Z5suD9MWFYxenNQTzZmSTA/view?usp=sharing">drive google</a>)</li>
<li> Создаем в каталоге папку с названием вашего теста</li>
<li> Копируем в созданную папку файл "test.php"</li>
<li> Создаём в этой же папке файл "questions.json"</li>
<li> Заполняем файл "questions.json" вопросами (см. инструкцию ниже)</li>
<li> Вставляем тест на сайт и задаём параметры.</li>
</ol>
<h3>Инструкция по заполнению файла "questions.json"</h3>

<h4>Файл "questions.json" имеет следующую структуру:</h4>
<pre>
{
  "1": {
    "question": "Содержание вопроса с выбором одного варианта из нескольких предолженных",
    "1": "Вариант один",
    "2": "Вариант два",
    "3": "Вариант три",
    "4": "Вариант четыре",
    "5": "Вариант пять",
    "answer": "Вариант три",
    "type":"oneRight"
  },
  "2": {
    "question": "Содержание вопроса с выбором нескольких вариантов из нескольких предложенных",
    "1": "Вариант один",
    "2": "Вариант два",
    "3": "Вариант три",
    "4": "Вариант четыре",
    "5": "Вариант пять",
    "answer" : "Вариант дваВариант четыреВариант пять",
    "type":"multiRight"
  },
  "3": {
    "question": "Содержание вопроса с открытым ответом",
    "answer":"Ответ на вопрос",
    "type":"open"
  }
}</pre>

<h4>Согласно структуре:</h4> 
<ul>
<li>В данном примере представленно три вопроса, таких вопросов может быть неограниченное количество. 
</li><li> В текущей версии есть три типа вопросов: вопрос с выбором одного варианта ответа из нескольких, вопрос с выбором нескольких вариантов ответа и открытый вопрос, где надо вписать строку/слово в текстовое поле. 
</li><li> Вариантов ответа может быть от одного до <b>пяти</b>
</li><li> в поле "answer" копируется <b>текст</b> ответа
</li><li> Если "type" Задан "multiRight", то в поле "answer" вставляются все ответы по порядку <b>без</b> пробела.
</li><li> В соответствии типа вопроса изменяется поле "type", оно может быть трех видов: "oneRight" - вопрос с выбором одного варианта ответа из нескольких, "multiRight" - вопрос с выбором нескольких вариантов ответа и "open" - открытый вопрос.
</li><li> При заполнении следует избегать ситсксических ошибок, для удобства можно воспользоваться следующим сервисом <a href="http://jshint.com/">jshint</a>, Или аналогичным.
</li>
</ul>
<h3>Вставка теста на сайт</h3>

Для добавления теста на сайт, необходимо вставить iframe и отправить в него настройки.
Пример ниже:
<pre>
&lt;script&gt; 
// добавляем окно тестирования на сайт, через данную конструкцию, чтобы данные не хэшировались браузером
document.write('&lt;iframe id="test-window" src="PATH TO TEST/tests/test_demo_ru/test.php#?hash="' + Math.random() + '"&gt;&lt;/iframe&gt;');

// Отправляем данные в дочернее окно
window.onload = function(){
$(function(){
       var message = {
            countQuestionsInTest : 20, 
            countQuestionsAll: 44,
            countPointsToOK : 15,
            min : 10,
            testName : 'Название теста'
        };
       var iframe = $('#test-window');
       iframe[0].contentWindow.postMessage(message, document.location);
       });
};
  &lt;/script&gt;
</pre>
<p>
В объекте message мы передаем настройки нашего теста.
</p>
<ul>
<li>countQuestionsInTest - Количество вопросов, которые будут в тесте (не больше, чем значение countQuestionsAll)</li> 
<li>countQuestionsAll - Количество вопросов всего в файле questions.json (не меньше, чем значение countQuestionsInTest)</li>
<li>countPointsToOK - Минимальное количество вопросов, на которые необходимо ответить (не больше, чем значение countQuestionsInTest)</li>
<li>min - Количество времени отведенное на выполнение теста</li>
<li>testName - Название теста</li>
</ul>
